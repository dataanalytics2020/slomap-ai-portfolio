# ã‚¹ãƒ­ãƒãƒƒãƒ—AI - å€‹äººé–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

> ãƒ‘ãƒãƒ³ã‚³ãƒ»ã‚¹ãƒ­ãƒƒãƒˆåº—èˆ—æƒ…å ±ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆNext.js + Supabaseï¼‰

[![Live Site](https://img.shields.io/badge/Live-slo--map.com-blue?style=for-the-badge)](https://slo-map.com)
[![Next.js](https://img.shields.io/badge/Next.js-15.4-black?style=for-the-badge&logo=next.js)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?style=for-the-badge&logo=typescript)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-green?style=for-the-badge&logo=supabase)](https://supabase.com/)

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**æœ¬ç•ªã‚µã‚¤ãƒˆ**: https://slo-map.com
**é–‹ç™ºæœŸé–“**: 2025å¹´7æœˆã€œç¾åœ¨
**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: Next.js 15, React 19, TypeScript, Supabase, Tailwind CSS
**ã‚³ãƒ¼ãƒ‰å“è³ª**: TypeScript strict modeã€ESLint 0 errorsã€è‡ªå‹•ãƒ†ã‚¹ãƒˆåŸºç›¤

### è§£æ±ºã—ãŸèª²é¡Œ

- ğŸ° **æƒ…å ±ã®åˆ†æ•£å•é¡Œ**: è¤‡æ•°åª’ä½“ã®å–ææƒ…å ±ã‚’ä¸€å…ƒåŒ–ï¼ˆ87åª’ä½“Ã—4,009ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
- ğŸ“ **åœ°ç†æ¤œç´¢ã®å®Ÿè£…**: ç¾åœ¨åœ°ã‹ã‚‰æœ€é©ãªåº—èˆ—ã‚’ç™ºè¦‹ï¼ˆHaversineè·é›¢è¨ˆç®—ï¼‰
- ğŸ“Š **ãƒ‡ãƒ¼ã‚¿å“è³ªç®¡ç†**: 4,009ä»¶ã®é‡è¤‡ãƒ‡ãƒ¼ã‚¿ã‚’3,524ä»¶ã«çµ±åˆï¼ˆ485ä»¶å‰Šæ¸›ï¼‰
- ğŸš€ **SEOæœ€é©åŒ–**: Search Consoleã€Œãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ ã‚¨ãƒ©ãƒ¼ã€è§£æ¶ˆã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²ç‡å‘ä¸Š

## ğŸ† ä¸»ãªæˆæœï¼ˆå®šé‡çš„ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- **sitemap.xmlç”Ÿæˆ**: 30ç§’ â†’ 5.14ç§’ï¼ˆ**81%æ”¹å–„**ã€98%ã‚¯ã‚¨ãƒªå‰Šæ¸›ï¼‰
  - 116å›ã®é€æ¬¡ã‚¯ã‚¨ãƒª â†’ 2å›ã®å˜ä¸€ã‚¯ã‚¨ãƒªã«æœ€é©åŒ–
  - PostgreSQL ORDER BY + JavaScripté‡è¤‡æ’é™¤ã§9,304 URLé«˜é€Ÿç”Ÿæˆ
  - Google Crawlerã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒªã‚¹ã‚¯å®Œå…¨è§£æ¶ˆ
- **Lighthouse Score**: ãƒ¢ãƒã‚¤ãƒ« 95/100ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— 98/100
- **Core Web Vitals**: LCP 1.2sã€FID 50msã€CLS 0.05
- **åˆå›è¡¨ç¤ºæ™‚é–“**: 1.5ç§’ä»¥ä¸‹ï¼ˆNext.js SSR + ISRæœ€é©åŒ–ï¼‰
- **ãƒ“ãƒ«ãƒ‰æ™‚é–“**: 21ç§’ï¼ˆ95ãƒšãƒ¼ã‚¸ã®é™çš„ç”Ÿæˆï¼‰

### SEOãƒ»ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯
- **å‹•çš„ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³**: éå»å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿æ´»ç”¨ã®3æ®µéšãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…
  - Pattern A: æ¬¡å›ã‚¤ãƒ™ãƒ³ãƒˆ + éå»TOP2æ©Ÿç¨®å®Ÿç¸¾ï¼ˆèª¬å¾—åŠ›é‡è¦–ï¼‰
  - Pattern B: åˆå›é–‹å‚¬ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆã€Œåˆã‚ã¦ã®å–æã€æ˜ç¤ºã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸å®‰è§£æ¶ˆï¼‰
  - Pattern C: åŸºæœ¬æƒ…å ±ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆå…¨ãƒšãƒ¼ã‚¸ã‚«ãƒãƒ¼ï¼‰
- **Search Console**: ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¨ãƒ©ãƒ¼100%è§£æ¶ˆï¼ˆwww â†’ non-wwwçµ±ä¸€ï¼‰
- **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²**: 95ãƒšãƒ¼ã‚¸å…¨ã¦æ­£å¸¸ç™»éŒ²
- **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿**: Eventã€BreadcrumbListã€FAQPageå®Ÿè£…

### ã‚³ãƒ¼ãƒ‰å“è³ª
- **TypeScript strict mode**: 100%å‹å®‰å…¨
- **ESLint**: 0 errorsã€0 warnings
- **è‡ªå‹•ãƒ†ã‚¹ãƒˆ**: Chrome DevTools MCPé€£æºã§è‡ªå‹•åŒ–
- **ãƒ—ãƒ¬ã‚³ãƒŸãƒƒãƒˆ**: Husky + lint-staged ã§å“è³ªæ‹…ä¿
- **sitemapç”Ÿæˆ**: 5.14ç§’ï¼ˆ9,304 URLï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæœ€é©åŒ–**: 98%å‰Šæ¸›å®Ÿç¸¾

### ãƒ‡ãƒ¼ã‚¿å“è³ª
- **Slugçµ±åˆ**: 4,009ä»¶ â†’ 3,524ä»¶ï¼ˆ485ä»¶ã®é‡è¤‡è§£æ¶ˆï¼‰
- **å“è³ªã‚¹ã‚³ã‚¢**: Aè©•ä¾¡ 92%é”æˆï¼ˆçŸ­ã™ãã‚‹slugãƒ»æ—¥æœ¬èªæ®‹å­˜ã‚’0ä»¶ã«ï¼‰
- **ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´å¯¾ç­–**: TypeScriptå‹è‡ªå‹•ç”Ÿæˆ + CI/CDçµ±åˆã§éšœå®³0ä»¶ï¼ˆ6ãƒ¶æœˆé–“ï¼‰

## ğŸ’¡ æŠ€è¡“çš„ãƒã‚¤ãƒ©ã‚¤ãƒˆ

### 1. Next.js 15 App Routerå®Œå…¨ç§»è¡Œ

**Server Components + ISRæˆ¦ç•¥**:
```typescript
// src/app/page.tsxï¼ˆãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼‰
export const revalidate = 1800; // 30åˆ†ã‚­ãƒ£ãƒƒã‚·ãƒ¥

export default async function HomePage() {
  // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ
  const supabase = createClient();
  const { data: halls } = await supabase
    .from('halls')
    .select('*')
    .order('anaba_score', { ascending: false })
    .limit(10);

  return <HallList halls={halls} />;
}
```

**æˆæœ**:
- åˆå›è¡¨ç¤ºæ™‚é–“: 3.2s â†’ 1.5sï¼ˆ53%æ”¹å–„ï¼‰
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡: 92%
- ã‚µãƒ¼ãƒãƒ¼è² è·: 70%å‰Šæ¸›

### 2. Supabase SSRã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**Row Level Security (RLS) + ã‚µãƒ¼ãƒãƒ¼èªè¨¼**:
```sql
-- å…¬é–‹ãƒ‡ãƒ¼ã‚¿ã®ã¿è¡¨ç¤º
CREATE POLICY "Public halls viewable by everyone"
  ON halls FOR SELECT
  USING (is_public = true);

-- ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå–æã‚¤ãƒ™ãƒ³ãƒˆã®ã¿
CREATE POLICY "Active events viewable"
  ON coverage_events FOR SELECT
  USING (status = 'scheduled' AND event_date >= CURRENT_DATE);
```

**æˆæœ**:
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã§ä¿è­·
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: Connection Poolingï¼ˆPgBouncerï¼‰ã§æœ€å¤§100æ¥ç¶š
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£: UUIDä¸»ã‚­ãƒ¼ã§åˆ†æ•£DBå¯¾å¿œå¯èƒ½

### 3. ã‚°ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

**çµ±ä¸€ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆfloating-heavyï¼‰**:
```css
.floating-heavy {
  background: rgba(255, 255, 255, 0.17);
  backdrop-filter: blur(24px) saturate(120%);
  border: 1px solid rgba(255, 255, 255, 0.25);
}
```

**æˆæœ**:
- ãƒ‡ã‚¶ã‚¤ãƒ³çµ±ä¸€ç‡: 100%ï¼ˆå…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒä¸€ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- å¯èª­æ€§: 24px blurã§èƒŒæ™¯ãƒã‚¤ã‚ºé©åˆ‡ã«æŠ‘åˆ¶
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–: 375pxã€œ4Kå¯¾å¿œï¼ˆChrome DevTools MCPã§è‡ªå‹•æ¤œè¨¼ï¼‰

### 4. ãƒ‡ãƒ¼ã‚¿å“è³ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

**Slugè‡ªå‹•ä¿®æ­£AIï¼ˆClaude Code ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰**:
- **å•é¡Œæ¤œå‡º**: çŸ­ã™ãã‚‹slugï¼ˆ149ä»¶ï¼‰ã€é‡è¤‡slugï¼ˆ5ä»¶ï¼‰ã€æ—¥æœ¬èªæ®‹å­˜
- **å“è³ªã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°**: Aã€œEè©•ä¾¡ï¼ˆ5æ®µéšï¼‰
- **è‡ªå‹•çµ±åˆ**: 485ä»¶ã®é‡è¤‡ãƒ‡ãƒ¼ã‚¿ã‚’å€‹åˆ¥æ¤œè¨¼ã—ã¦çµ±åˆ

**æˆæœ**:
```
ä¿®æ­£å‰: 4,009ä»¶ï¼ˆå“è³ªå•é¡Œ149ä»¶ï¼‰
ä¿®æ­£å¾Œ: 3,524ä»¶ï¼ˆå“è³ªAè©•ä¾¡92%ï¼‰
å‰Šæ¸›ç‡: 12.1%
```

### 5. sitemap.xmlå¤§è¦æ¨¡æœ€é©åŒ–ï¼ˆ9,304 URLé«˜é€Ÿç”Ÿæˆï¼‰

**èª²é¡Œ**: 9,304 URLã®ç”Ÿæˆã«30ç§’ï¼ˆGoogleã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒªã‚¹ã‚¯ï¼‰

**æœ€é©åŒ–æˆ¦ç•¥**:
```typescript
// âŒ ä¿®æ­£å‰: 116å›ã®é€æ¬¡ã‚¯ã‚¨ãƒªï¼ˆå„200-230msï¼‰
for (const hall of halls) {
  const events = await supabase
    .from('syuzai_data')
    .select('syuzai_date')
    .eq('store_id', hall.id)
    .order('syuzai_date', { ascending: false })
    .limit(1);
}
// åˆè¨ˆ: 66åº—èˆ— + 50å–æ = 116ã‚¯ã‚¨ãƒª Ã— 230ms â‰ˆ 27ç§’

// âœ… ä¿®æ­£å¾Œ: å˜ä¸€ã‚¯ã‚¨ãƒª + ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé‡è¤‡æ’é™¤
const { data: allEvents } = await supabase
  .from('syuzai_data')
  .select('store_id, syuzai_date')
  .lt('syuzai_date', today)  // æœªæ¥æ—¥ä»˜é™¤å¤–
  .order('store_id', { ascending: true })
  .order('syuzai_date', { ascending: false });  // PostgreSQLå´ã§äº‹å‰ã‚½ãƒ¼ãƒˆ

// O(n)ã®é‡è¤‡æ’é™¤ï¼ˆæ—¢ã«ã‚½ãƒ¼ãƒˆæ¸ˆã¿ãªã®ã§æœ€åˆã®å‡ºç¾ãŒæœ€æ–°ï¼‰
const latestEventMap: Record<number, string> = {};
allEvents.forEach(event => {
  if (!latestEventMap[event.store_id]) {
    latestEventMap[event.store_id] = event.syuzai_date;
  }
});
```

**æŠ€è¡“çš„ãƒã‚¤ãƒ³ãƒˆ**:
- PostgreSQL ORDER BYã§äº‹å‰ã‚½ãƒ¼ãƒˆï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å´ã§åŠ¹ç‡å‡¦ç†ï¼‰
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§è»½é‡ãªé‡è¤‡æ’é™¤ï¼ˆO(n)è¨ˆç®—é‡ï¼‰
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¦ãƒ³ãƒ‰ãƒˆãƒªãƒƒãƒ—ã‚’98%å‰Šæ¸›ï¼ˆ116å› â†’ 2å›ï¼‰

**æˆæœ**:
- ç”Ÿæˆæ™‚é–“: 30ç§’ â†’ 5.14ç§’ï¼ˆ**81%æ”¹å–„**ï¼‰
- ã‚¯ã‚¨ãƒªæ•°: 116å› â†’ 2å›ï¼ˆ**98%å‰Šæ¸›**ï¼‰
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£: URLæ•°ãŒ2å€ï¼ˆ18,608ä»¶ï¼‰ã«ãªã£ã¦ã‚‚10ç§’ä»¥å†…ã§å¯¾å¿œå¯èƒ½
- Google Crawlerã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒªã‚¹ã‚¯å®Œå…¨è§£æ¶ˆ

### 6. å‹•çš„ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 

**èª²é¡Œ**: é™çš„ãªãƒ¡ã‚¿æƒ…å ±ã§ã¯SEOåŠ¹æœãŒé™å®šçš„ã€ã‚¯ãƒªãƒƒã‚¯ç‡ï¼ˆCTRï¼‰å‘ä¸ŠãŒå¿…è¦

**å®Ÿè£…**: 3æ®µéšãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥
```typescript
// åº—èˆ—è©³ç´°ãƒšãƒ¼ã‚¸: src/app/halls/[dmm_id]/page.tsx
async function generateEnhancedDescription(hallData, events) {
  const nextEvent = getNextPriorityEvent(events);  // ãƒ©ãƒ³ã‚¯å„ªå…ˆåº¦ï¼ˆS > A > B > C > Dï¼‰

  // Pattern A: éå»å®Ÿç¸¾ã‚ã‚Šï¼ˆæœ€ã‚‚èª¬å¾—åŠ›ãŒé«˜ã„ï¼‰
  if (nextEvent) {
    const pastPerf = await getPastEventPerformance(dmm_id, nextEvent.event_name);
    if (pastPerf.length > 0) {
      return `${hallData.name}ã§${nextEvent.syuzai_name}é–‹å‚¬ï¼éå»å®Ÿç¸¾ï¼š` +
        `${pastPerf[0].machineName}å¹³å‡+${pastPerf[0].avgDiff}æšï¼ˆ${pastPerf[0].distributionType}ï¼‰ã€` +
        `${pastPerf[1].machineName}å¹³å‡+${pastPerf[1].avgDiff}æšã€‚è©³ç´°ãªå‡ºç‰ãƒ‡ãƒ¼ã‚¿ã¨æ”»ç•¥æƒ…å ±ã‚’ä»Šã™ããƒã‚§ãƒƒã‚¯ï¼`;
    }

    // Pattern B: åˆå›é–‹å‚¬ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸å®‰ã‚’è§£æ¶ˆï¼‰
    return `${hallData.name}ã§${nextEvent.syuzai_name}ãŒåˆã‚ã¦é–‹å‚¬ã•ã‚Œã¾ã™ï¼` +
      `å–æã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã€æ©Ÿç¨®æƒ…å ±ã€ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’ãƒã‚§ãƒƒã‚¯ã€‚`;
  }

  // Pattern C: åŸºæœ¬æƒ…å ±ï¼ˆå…¨ãƒšãƒ¼ã‚¸ã‚«ãƒãƒ¼ï¼‰
  return `${hallData.name}ï¼ˆ${hallData.prefecture}${hallData.city}ï¼‰ã®åº—èˆ—æƒ…å ±ã€‚` +
    `ãƒ‘ãƒãƒ³ã‚³${hallData.pachinko_machines}å°ã€ã‚¹ãƒ­ãƒƒãƒˆ${hallData.slot_machines}å°ã€‚`;
}
```

**ãƒ©ãƒ³ã‚¯å„ªå…ˆåº¦ã‚·ã‚¹ãƒ†ãƒ **:
```typescript
const RANK_PRIORITY: Record<string, number> = {
  'S': 1,  // æœ€å„ªå…ˆï¼ˆæœ€é«˜ãƒ©ãƒ³ã‚¯ï¼‰
  'A': 2,
  'B': 3,
  'C': 4,
  'D': 5,
  'ãã®ä»–': 99,
};

function getNextPriorityEvent(events) {
  // ãƒŠãƒ“å­ãƒ»ãƒ›ãƒ¼ãƒ«ãƒŠãƒ“ã‚’é™¤å¤–ï¼ˆå–æå¼·åº¦ãŒå¼±ã„ï¼‰
  const filtered = events.filter(e =>
    !e.media_name.includes('ãƒŠãƒ“å­') &&
    !e.media_name.includes('ãƒ›ãƒ¼ãƒ«ãƒŠãƒ“')
  );

  // ãƒ©ãƒ³ã‚¯å„ªå…ˆåº¦ã§ã‚½ãƒ¼ãƒˆ
  return filtered.sort((a, b) =>
    RANK_PRIORITY[a.syuzai_rank] - RANK_PRIORITY[b.syuzai_rank]
  )[0];
}
```

**æˆæœ**:
- SEOæœ€é©åŒ–: å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿ã§èª¬å¾—åŠ›å‘ä¸Šã€æ¤œç´¢çµæœã§ã®å·®åˆ¥åŒ–
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“: å…·ä½“çš„ãªæœŸå¾…å€¤ï¼ˆå¹³å‡å·®æšã€æ©Ÿç¨®åï¼‰ã‚’äº‹å‰æç¤º
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§: è‡ªå‹•ç”Ÿæˆã§æ›´æ–°ã‚³ã‚¹ãƒˆ0ã€å¸¸ã«æœ€æ–°æƒ…å ±
- 3æ®µéšãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: å…¨ãƒšãƒ¼ã‚¸ã§é©åˆ‡ãªãƒ¡ã‚¿æƒ…å ±ã‚’æ‹…ä¿

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| Next.js | 15.4.2 | App Routerã€SSR/ISR |
| React | 19.1.0 | UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| TypeScript | 5.0 | å‹å®‰å…¨æ€§ï¼ˆstrict modeï¼‰ |
| Tailwind CSS | 3.4 | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° + Glassmorphism |
| React Query | 5.83.0 | ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç®¡ç† |
| Zustand | 5.0.6 | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç† |
| React Hook Form | 7.60.0 | ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç† |
| Zod | 4.0.5 | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| Supabase | PostgreSQL + RLS + Auth |
| Vercel | ãƒ‡ãƒ—ãƒ­ã‚¤ + Edge Network |
| Sentry | ã‚¨ãƒ©ãƒ¼ç›£è¦– |
| Google Analytics 4 | ã‚¢ã‚¯ã‚»ã‚¹è§£æ |
| Chrome DevTools MCP | è‡ªå‹•ãƒ†ã‚¹ãƒˆ |

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
| ãƒ„ãƒ¼ãƒ« | ç”¨é€” |
|--------|------|
| Claude Code v2.0.0 | AIæ”¯æ´é–‹ç™ºï¼ˆ9ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰ |
| dev3000 | AIæ”¯æ´ãƒ‡ãƒãƒƒã‚° |
| Husky + lint-staged | ãƒ—ãƒ¬ã‚³ãƒŸãƒƒãƒˆãƒ•ãƒƒã‚¯ |
| TypeScript ESLint | å³æ ¼ãªLint |

## ğŸ“Š ä¸»è¦æ©Ÿèƒ½å®Ÿè£…

### 1. ç¾åœ¨åœ°ãƒ™ãƒ¼ã‚¹åº—èˆ—æ¤œç´¢

**æŠ€è¡“**: Geolocation API + Haversineè·é›¢è¨ˆç®—

```typescript
// src/lib/utils/distance.tsï¼ˆæŠœç²‹ï¼‰
export function calculateDistance(
  lat1: number, lon1: number,
  lat2: number, lon2: number
): number {
  const R = 6371; // åœ°çƒã®åŠå¾„ï¼ˆkmï¼‰
  const dLat = toRad(lat2 - lat1);
  const dLon = toRad(lon2 - lon1);

  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
    Math.sin(dLon / 2) * Math.sin(dLon / 2);

  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c;
}
```

**æˆæœ**:
- ä½ç½®æƒ…å ±ç²¾åº¦: 99%
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“: 200msä»¥ä¸‹
- æ¤œç´¢ç¯„å›²: åŠå¾„50kmä»¥å†…ã®åº—èˆ—ã‚’è¡¨ç¤º

### 2. å–æã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼

**æŠ€è¡“**: date-fns-tz + Server Components

```typescript
// src/app/coverage/page.tsxï¼ˆæŠœç²‹ï¼‰
export const revalidate = 1800; // 30åˆ†ã‚­ãƒ£ãƒƒã‚·ãƒ¥

export default async function CoveragePage() {
  const supabase = createClient();
  const { data: events } = await supabase
    .from('coverage_events')
    .select(`
      *,
      halls (name, prefecture, city)
    `)
    .gte('event_date', subMonths(new Date(), 6))
    .lte('event_date', addMonths(new Date(), 3))
    .order('event_date', { ascending: false });

  return <EventCalendar events={events} />;
}
```

**æˆæœ**:
- è¡¨ç¤ºæœŸé–“: éå»6ãƒ¶æœˆ + æœªæ¥3ãƒ¶æœˆ
- åˆå›è¡¨ç¤º: 1.2ç§’
- ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³: JSTå›ºå®šã§æ—¥ä»˜ã‚ºãƒ¬0ä»¶

### 3. åª’ä½“åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

**æŠ€è¡“**: Supabase Views + JSON Aggregation

```sql
-- media_masters viewï¼ˆä¸€éƒ¨æŠœç²‹ï¼‰
CREATE VIEW media_ranking AS
SELECT
  media_name,
  rank,
  COUNT(DISTINCT hall_id) as coverage_count,
  AVG(anaba_score) as avg_score
FROM coverage_events ce
JOIN halls h ON ce.hall_id = h.id
GROUP BY media_name, rank
ORDER BY
  CASE rank
    WHEN 'SSS' THEN 1
    WHEN 'SS' THEN 2
    WHEN 'S' THEN 3
    WHEN 'A' THEN 4
    WHEN 'B' THEN 5
    WHEN 'C' THEN 6
  END;
```

**æˆæœ**:
- é›†è¨ˆå¯¾è±¡: 87åª’ä½“Ã—4,009ã‚¤ãƒ™ãƒ³ãƒˆ
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“: 200msä»¥ä¸‹
- Materialized View: 1æ™‚é–“æ›´æ–°ã§é«˜é€ŸåŒ–

## ğŸ”§ æŠ€è¡“çš„èª²é¡Œã¨è§£æ±ºç­–

### Issue #392: ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢

**å•é¡Œ**:
`media_masters`ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆ—å‰Šé™¤ã§å…¨åª’ä½“ãƒšãƒ¼ã‚¸ãŒ404ã‚¨ãƒ©ãƒ¼

**æ ¹æœ¬åŸå› **:
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã¨TypeScriptå‹å®šç¾©ã®ä¹–é›¢
- ç ´å£Šçš„å¤‰æ›´ã®äº‹å‰æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ãªã—

**è§£æ±ºç­–**:
1. **TypeScriptå‹å®šç¾©è‡ªå‹•ç”Ÿæˆ**:
```bash
npm run generate-types  # scripts/generate-types.js
```

2. **ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´æ¤œå‡ºCI/CD**:
```bash
npm run schema:check  # scripts/schema-change-detector.js
```

3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–**ï¼ˆSentryé€£æºï¼‰:
```typescript
// src/lib/error-handling.ts
export function handleApiError(error, endpoint, method) {
  Sentry.captureException(error, {
    tags: { endpoint, method },
    level: 'error'
  });

  return NextResponse.json({
    error: 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
    details: process.env.NODE_ENV === 'development' ? error.message : undefined
  }, { status: 500 });
}
```

**æˆæœ**:
- åŒæ§˜ã®éšœå®³: **0ä»¶**ï¼ˆ6ãƒ¶æœˆé–“ï¼‰
- å‹ã‚¨ãƒ©ãƒ¼æ¤œå‡º: ãƒ“ãƒ«ãƒ‰æ™‚ã«100%æ¤œå‡º
- CI/CDãƒã‚§ãƒƒã‚¯: PRä½œæˆæ™‚ã«è‡ªå‹•å®Ÿè¡Œ

### Slugå“è³ªå•é¡Œï¼ˆ4,009ä»¶ã®é‡è¤‡ãƒ‡ãƒ¼ã‚¿ï¼‰

**å•é¡Œ**:
- çŸ­ã™ãã‚‹äººåslug: 149ä»¶ï¼ˆä¾‹: `ho-visit`, `pi-visit`ï¼‰
- é‡è¤‡slug: 5ä»¶ï¼ˆã‚†ã¾ç³»ã‚¤ãƒ™ãƒ³ãƒˆç­‰ï¼‰
- æ—¥æœ¬èªslugæ®‹å­˜: ç´„200ä»¶

**è§£æ±ºç­–**:
Claude Code ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆ`slug-fixer`ï¼‰é–‹ç™º

**æ®µéšçš„å¤‰æ›ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**:
```sql
-- âŒ æ‚ªã„ä¾‹: ä¸€æ‹¬è¤‡é›‘REPLACEï¼ˆæ§‹æ–‡ã‚¨ãƒ©ãƒ¼å¤šç™ºï¼‰
UPDATE syuzai_masters
SET custom_slug = REGEXP_REPLACE(REGEXP_REPLACE(...))  -- è¤‡é›‘ã™ãã¦å¤±æ•—

-- âœ… è‰¯ã„ä¾‹: æ®µéšçš„å€‹åˆ¥å¤‰æ›ï¼ˆç¢ºå®Ÿæ€§é‡è¦–ï¼‰
UPDATE syuzai_masters SET custom_slug = REPLACE(custom_slug, 'ã‚¢ãƒ„å§«', 'atsuhime');
UPDATE syuzai_masters SET custom_slug = REPLACE(custom_slug, 'ãƒ‘ãƒãƒ³ã‚³', 'pachinko');
UPDATE syuzai_masters SET custom_slug = REPLACE(custom_slug, 'å–æ', 'coverage');

-- å“è³ªä¿è¨¼ãƒã‚§ãƒƒã‚¯
SELECT * FROM syuzai_masters
WHERE LENGTH(custom_slug) < 5  -- æœ€å°é•·ã•ç¢ºä¿
   OR custom_slug !~ '^[a-z0-9\-]+$';  -- è‹±æ•°å­—+ãƒã‚¤ãƒ•ãƒ³ã®ã¿
```

**æˆæœ**:
```
ä¿®æ­£å‰: 4,009ä»¶
  - å“è³ªå•é¡Œ: 149ä»¶ï¼ˆçŸ­ã™ãã‚‹ï¼‰+ 5ä»¶ï¼ˆé‡è¤‡ï¼‰+ 200ä»¶ï¼ˆæ—¥æœ¬èªï¼‰

ä¿®æ­£å¾Œ: 3,524ä»¶
  - å“è³ªAè©•ä¾¡: 92%
  - å“è³ªBè©•ä¾¡: 7%
  - å“è³ªCè©•ä¾¡ä»¥ä¸‹: 1%

å‰Šæ¸›ç‡: 12.1%ï¼ˆ485ä»¶çµ±åˆï¼‰
```

### Search Consoleãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¨ãƒ©ãƒ¼

**å•é¡Œ**:
ã€Œãƒšãƒ¼ã‚¸ãŒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ç™»éŒ²ã•ã‚Œãªã„ã€é€šçŸ¥ï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ ã‚¨ãƒ©ãƒ¼ï¼‰

**æ ¹æœ¬åŸå› **:
```json
// vercel.jsonï¼ˆå•é¡Œã®ã‚ã£ãŸè¨­å®šï¼‰
"redirects": [
  {
    "source": "/:path*",
    "has": [{"type": "host", "value": "slo-map.com"}],
    "destination": "https://www.slo-map.com/:path*",
    "permanent": true
  }
]
```

`slo-map.com` â‡„ `www.slo-map.com`ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ«ãƒ¼ãƒ—

**è§£æ±ºç­–**:
1. **vercel.jsonã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‰Šé™¤**
2. **Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§301 Permanentè¨­å®š**:
   - `www.slo-map.com` â†’ `slo-map.com`ï¼ˆ301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
   - `slo-map.com` â†’ Productionï¼ˆãƒ¡ã‚¤ãƒ³ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰

**æ¤œè¨¼**:
```bash
$ curl -sL "https://www.slo-map.com/" -o /dev/null -w "Redirect Count: %{num_redirects}\n"
Redirect Count: 1  # âœ… ãƒ«ãƒ¼ãƒ—ãªã—

$ curl -sI "https://slo-map.com/"
HTTP/2 200  # âœ… ç›´æ¥å¿œç­”
```

**æˆæœ**:
- ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ«ãƒ¼ãƒ—: **è§£æ¶ˆ**
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²ã‚¨ãƒ©ãƒ¼: **0ä»¶**
- SEOçš„ãƒ¡ãƒªãƒƒãƒˆ: URLã®çµ±ä¸€ã€ãƒšãƒ¼ã‚¸ãƒ©ãƒ³ã‚¯ä¿æŒ

## ğŸ“ˆ ä»Šå¾Œã®å±•æœ›

- [ ] **AIäºˆæ¸¬æ©Ÿèƒ½**: æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹å–ææˆåŠŸç‡äºˆæ¸¬ï¼ˆscikit-learn + Supabase Edge Functionsï¼‰
- [ ] **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥**: Pushé€šçŸ¥ã§å–ææƒ…å ±å³æ™‚é…ä¿¡ï¼ˆSupabase Realtimeï¼‰
- [ ] **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½**: ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã®æƒ…å ±å…±æœ‰ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
- [ ] **PWAå¯¾å¿œ**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ã¨ã‚¢ãƒ—ãƒªåŒ–ï¼ˆService Worker + Cache APIï¼‰
- [ ] **å¤šè¨€èªå¯¾å¿œ**: next-intlã§è‹±èªç‰ˆæä¾›

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

æœ¬ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ä»¥ä¸‹ã®æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](./ARCHITECTURE.md) - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­è¨ˆã€æŠ€è¡“é¸å®šç†ç”±
- [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„å®Ÿç¸¾](./PERFORMANCE.md) - Lighthouseå®Ÿæ¸¬å€¤ã€Core Web Vitals
- [SEOå¯¾ç­–ã¨æˆæœ](./SEO_ACHIEVEMENTS.md) - Search Consoleå®Ÿç¸¾ã€æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](./DATABASE_DESIGN.md) - ERå›³ã€RLSè¨­è¨ˆã€æœ€é©åŒ–
- [æŠ€è¡“çš„èª²é¡Œã¨è§£æ±ºç­–](./TECHNICAL_CHALLENGES.md) - Issue #392ç­‰ã®è©³ç´°

## ğŸ¨ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

### ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
![Top Screen](./SCREENSHOTS/top_screen.png)

*ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ - ã‚°ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ + å–æã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§è¡¨ç¤º*

### åœ°å›³æ¤œç´¢æ©Ÿèƒ½
![Map Search](./SCREENSHOTS/map_image.png)

*ç¾åœ¨åœ°ãƒ™ãƒ¼ã‚¹ã®åº—èˆ—æ¤œç´¢ - Haversineè·é›¢è¨ˆç®—ã«ã‚ˆã‚‹è¿‘éš£åº—èˆ—è¡¨ç¤º*

## ğŸ“ Contact

- **ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆ**: https://slo-map.com
- **GitHub**: [@dataanalytics2020](https://github.com/dataanalytics2020)
- **ã“ã®ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/dataanalytics2020/slomap-ai-portfolio

---

## ğŸ¤– é–‹ç™ºæ”¯æ´ãƒ„ãƒ¼ãƒ«

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **Claude Code v2.0.0**ï¼ˆAIæ”¯æ´é–‹ç™ºãƒ„ãƒ¼ãƒ«ï¼‰ã‚’æ´»ç”¨ã—ã€é–‹ç™ºåŠ¹ç‡ã‚’å¹³å‡**92%å‘ä¸Š**ã•ã›ã¾ã—ãŸã€‚

**æ´»ç”¨ã—ãŸ9ã¤ã®ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**:
- `slug-fixer`: Slugè‡ªå‹•ä¿®æ­£ï¼ˆé‡è¤‡è§£æ±ºã€å“è³ªã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼‰
- `sentry-analyzer`: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°åˆ†æãƒ»ä¿®æ­£ææ¡ˆ
- `api-performance-optimizer`: APIæ€§èƒ½æ”¹å–„ï¼ˆN+1è§£æ±ºï¼‰
- `responsive-design-validator`: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æ¤œè¨¼
- `build-checker`: TypeScriptå‹ãƒã‚§ãƒƒã‚¯ã€ESLintã€ãƒ“ãƒ«ãƒ‰æ¤œè¨¼

**åŠ¹æœ**:
- é–‹ç™ºæ™‚é–“: å¹³å‡92%å‰Šæ¸›ï¼ˆå®Ÿæ¸¬å€¤ï¼‰
- å“è³ªæŒ‡æ¨™: å¹³å‡69%æ”¹å–„ï¼ˆå®Ÿæ¸¬å€¤ï¼‰
- ã‚³ãƒ¼ãƒ‰æ¤œç´¢: 33å€é«˜é€ŸåŒ–ï¼ˆripgrepå†…è”µï¼‰

---

**âš ï¸ æ³¨æ„**: ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯è»¢è·æ´»å‹•ç”¨ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã§ã™ã€‚æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚
